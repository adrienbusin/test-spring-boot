<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Android Project</title>
    <meta name="author" content="Adrien Busin"/>
    <meta name="description"
          content="Upload file for EILCO Android class"/>
    <link rel="icon" type="image/png" th:src="@{images/favicon.ico}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
          integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://unpkg.com/tailwindcss/dist/tailwind.min.css">
    <script src='https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
<body class="bg-blue-500 w-screen">
<div>
    <img class="transform rotate-45 w-0 md:w-1/6 fixed -bottom-14 2xl:-bottom-16 -left-20 2xl:-left-32" th:src="@{images/android.png}"/>
</div>
<form id="submitForm" method="post" enctype="multipart/form-data">
    <div class="md:mt-20 mt-5 flex flex-wrap w-full ">
        <div class="w-full md:w-1/2 ">
            <div class="w-11/12 sm:w-1/2 flex flex-col items-center justify-center mx-auto">
                <label class="w-full shadow-xl flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg tracking-wide border border-blue cursor-pointer hover:bg-blue-500 hover:text-white">
                    <svg class="w-8 h-8" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path d="M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"/>
                    </svg>
                    <span class="mt-2 uppercase font-bold leading-normal">Ajouter votre fichier compressé<br></span>
                    <span class="mt-2 text-xs ">ajouter jusqu'à 150Mo</span>
                    <input id="uploadFileInput" type='file' class="hidden" name="file" required/>
                </label>
                <div class="w-full flex flex-wrap items-center justify-center">
                    <div class="flex-auto">
                        <div class="font-bold h-6 mt-3 text-white text-xs leading-8 uppercase"><span
                                class="text-red-400 mr-1">*</span> Prénom
                        </div>
                        <div class="my-2 bg-white p-1 flex border border-gray-200 rounded shadow-xl">
                            <input type="text" required
                                   id="prenom" name="prenom"
                                   class="p-1 px-2 appearance-none outline-none w-full text-gray-800 ">
                        </div>
                        <div class="font-bold h-6 mt-3 text-white text-xs leading-8 uppercase"><span
                                class="text-red-400 mr-1">*</span>Nom
                        </div>
                        <div class="my-2 bg-white p-1 flex border border-gray-200 rounded shadow-xl">
                            <input type="text" required
                                   id="nom" name="nom"
                                   class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                        </div>
                        <div class="font-bold h-6 mt-3 text-white text-xs leading-8 uppercase"><span
                                class="text-red-400 mr-1">*</span> Email
                        </div>
                        <div class="my-2 bg-white p-1 flex border border-gray-200 rounded shadow-xl">
                            <input id="email" name="email" type="email" required
                                   class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                        </div>
                        <div class="flex flex-col mt-6 items-center justify-center">
                            <button id="upload"
                                    class="pl-12 border px-6 bg-blue-500 hover:bg-white hover:text-blue-500 text-white font-bold py-2 rounded g-recaptcha">
                                Envoyer &nbsp;<span id="spinnerMail" class="invisible"><i
                                    class="fas fa-circle-notch fa-spin"></i></span>
                            </button>
                        </div>
                        <div id="alertError" th:if="${message_error}"
                             class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 my-3 rounded relative"
                             role="alert">
                            <strong class="font-bold">Oups!</strong>
                            <span class="block sm:inline">Un problème est survenue... <br>Rééssaye ou envoi ton projet via <a
                                    href="https://wetransfer.com/" class="underline">WeTransfer</a> à l'adresse android@busin.fr</span>
                        <span class="block sm:inline" id="errorMessage"></span>
                        <span id="btnCloseError" class="absolute top-0 bottom-0 right-0 px-4 py-3">
                        <svg class="fill-current h-6 w-6 text-red-500" role="button" xmlns="http://www.w3.org/2000/svg"
                             viewBox="0 0 20 20"><title>Close</title><path
                                d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
                        </span>
                        </div>
                        <div id="alertSuccess" th:if="${message}"
                             class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 my-3 rounded relative"
                             role="alert">
                            <strong class="font-bold">Projet envoyé avec succès!</strong><br>
                            <span class="block sm:inline text-green-500">Vérifie que ton projet se trouve dans la liste des projets reçus</span>
                            <span id="btnCloseSuccess" class="absolute top-0 bottom-0 right-0 px-4 py-3">
                        <svg class="fill-current h-6 w-6 text-green-500" role="button"
                             xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path
                                d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
                    </span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="w-full sm:w-1/2 my-10 md:mt-0 mx-auto">
            <div class="flex flex-row mx-auto items-center justify-center">
                <table class="border-collapse w-11/12 shadow-xl ">
                    <thead>
                    <tr>
                        <th class="p-2 font-bold bg-gray-200 text-xs uppercase bg-white border border-gray-300 table-cell">
                            ÉUDIANT
                        </th>
                        <th class="p-2 font-bold bg-gray-200 text-xs uppercase bg-white border border-gray-300 table-cell">
                            FICHIER
                        </th>
                    </tr>
                    </thead>
                    <tbody id="tabFile" th:each="project : ${projects}">
                    <tr>
                        <td class="p-2 text-gray-800 text-xs bg-white text-center border border-b table-cell"
                            th:text="${project.user}"></td>
                        <td class="w-1/2 text-gray-800 bg-white text-xs p-2 text-center border border-b table-cell"
                            th:text="${project.file}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</form>
<script>
    $('#uploadFileInput').change(function () {
        var file = $('#uploadFileInput')[0].files[0].name;
        $(this).prev('span').prev('span').text(file);
    });

    $("#btnCloseSuccess").click(function () {
        $("#alertSuccess").addClass("hidden").removeClass("block")
    });
    $("#btnCloseError").click(function () {
        $("#alertError").addClass("hidden").removeClass("block")
    });
</script>

</body>
</html>

